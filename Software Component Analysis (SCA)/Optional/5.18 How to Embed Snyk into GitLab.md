# How to Embed Snyk into GitLab
You will learn to use Snyk in CI/CD pipeline and allow the job to fail even when the tool found several issues.
## Considering your DevOps team created a simple CI pipeline with the following contents.
```
image: docker:latest  # To run all jobs in this pipeline, use a latest docker image

services:
  - docker:dind       # To run all jobs in this pipeline, use a docker image which contains a docker daemon running inside (dind - docker in docker). Reference: https://forum.gitlab.com/t/why-services-docker-dind-is-needed-while-already-having-image-docker/43534

stages:
  - build
  - test
  - release
  - preprod
  - integration
  - prod

build:
  stage: build
  image: python:3.6
  before_script:
   - pip3 install --upgrade virtualenv
  script:
   - virtualenv env                       # Create a virtual environment for the python application
   - source env/bin/activate              # Activate the virtual environment
   - pip install -r requirements.txt      # Install the required third party packages as defined in requirements.txt
   - python manage.py check               # Run checks to ensure the application is working fine

test:
  stage: test
  image: python:3.6
  before_script:
   - pip3 install --upgrade virtualenv
  script:
   - virtualenv env
   - source env/bin/activate
   - pip install -r requirements.txt
   - python manage.py test taskManager
```
Log into GitLab using the following details and run the above pipeline.
Need to create a CI/CD pipeline by replacing the .gitlab-ci.yml file content with the above CI script. Click on the Edit button to replace the content (use Control+A and Control+V).
Save changes to the file using the Commit changes button.

#### Challenge
We will use a commercial offering Snyk to scan for vulnerable third-party components.

Add another job name oast-snyk under the build stage with the Snyk tool
Sign up for the Snyk’s Free service and generate/copy the token
Store Snyk token in Variables via Project –> Settings –> CI/CD –> Variables https://gitlab-ce-acsrq8h9.lab.practical-devsecops.training/root/django-nv/-/settings/ci_cd
Create a new variable SNYK_TOKEN and put the token you got from the service, and ensure the protected flag is turned on
Use Snyk’s Linux binary to scan the dependencies in the project

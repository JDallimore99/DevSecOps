# Pipeline as Code (PaC) using Jenkins
In this scenario, you will learn how to configure Jenkins with GitLab as CI/CD pipeline and create a simple Jenkinsfile for your projects.
## Create a new job
The Jenkins system is already configured with GitLab. If you wish to know how to configure Jenkins with GitLab, you can check out this link.

We will create a new job in Jenkins by visiting https://jenkins-0qiafpel.lab.practical-devsecops.training/newJob.

You can use the following details to log into Jenkins.

|Name|Value|
|:---|:----|
|Username|	root|
|Password	|pdso-training|

Provide a name for your new item, e.g., django.nv, select the Pipeline option, and click on the OK button.

In the next screen, do the following steps:

1. Click on the Build Triggers tab, check the Build when a change is pushed to GitLab..... checkbox.
2. At the bottom right-hand side, choose the Advanced… button below the Comment (regex) for triggering a build form field.
3 Click on the Generate button under Secret token to generate a token.
We will use this token for GitLab’s Webhook Settings. This webhook setting will allow GitLab to let Jenkins know whenever a change is made to the repository.

Please visit the following GitLab URL to set up the Jenkins webhook.

|Name	|Value|
|:---|:---|
|URL	|https://gitlab-ce-0qiafpel.lab.practical-devsecops.training/root/django-nv/hooks|
Fill the form using the following details.

|Name	|Value|
|:---|:---|
|URL|	https://jenkins-0qiafpel.lab.practical-devsecops.training/project/django.nv|
|Secret Token	|Paste the secret token we just generated above.|

Click on the Add webhook button, and go back to the Jenkins tab to continue the setup process.

Click on the Pipeline tab, and select Pipeline script from SCM from Definition options. Once you do that, few more options would be made available to you.

Select Git as SCM, enter our django.nv repository http url.

|Name|	Value|
|:---|:---|
|Repository URL|	http://gitlab-ce-0qiafpel.lab.practical-devsecops.training/root/django-nv.git|
Since we haven’t added the GitLab credentials to the Jenkins system, you will get an error.

Failed to connect to repository : Command "git ls-remote -h -- http://gitlab-ce-0qiafpel.lab.practical-devsecops.training/root/django-nv HEAD" returned status code 128:
stdout:
stderr: remote: HTTP Basic: Access denied
fatal: Authentication failed for 'http://gitlab-ce-0qiafpel.lab.practical-devsecops.training/root/django-nv.git/'
Let’s add the credentials by clicking on the Add button (the one with a key symbol). Select the Jenkins option and fill the pop-up form with the following details.

|Name|	Value|
|:---|:----|
|Username	|root|
|Password	|pdso-training|
|ID	|gitlab-auth|
|Description	|Leave it blank as it’s optional|

Click on the Add button, and select our new credentials from the Credentials Dropdown.

The error we experienced before should be gone by now.

Finally, click the Save button.
